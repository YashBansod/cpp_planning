# a-star

## Overview
This is a basic graph based a-star (A*) search implementation in C++17.  
The graph structure was implemented using Boost Graph Library. Nodes and Edges are user defined structures. 
The graph was configured for bidirectional architecture.
The terminal arguments parsing is done using Boost Program Option Library.

See the [SAMPLE_RUNS.md](./SAMPLE_RUNS.md) file to see graph output of A* search on input files available in 
[inputs](./inputs). The output files of the search are saved in [outputs](./outputs).

There are 3 search functions that are defined in [search.h](./search.h). These functions implement the A* search
using varying data structures for managing its Open Nodes List. These functions are:
```c++
// Open Nodes List uses std::multiset. Element needs to be removed before modification and then re-inserted.
bool search_1(int s_node_id, int g_node_id, Graph &g, const std::function<double(Node & , Node & )> &h_func,
                const double weight = 1, const int verbose = 0);

// Open Nodes List uses std::priority_queue. Heap needs to be remade after modification of an element.
bool search_2(int s_node_id, int g_node_id, Graph &g, const std::function<double(Node & , Node & )> &h_func,
                const double weight = 1, const int verbose = 0);

// Open Nodes List uses std::list. Insertion sort is used to maintain order.
bool search_3(int s_node_id, int g_node_id, Graph &g, const std::function<double(Node & , Node & )> &h_func,
                const double weight = 1, const int verbose = 0)
```
The open nodes in the **a-star::search_1** algorithm are selected from a **std::multiset**. **std::multiset** internally 
uses red black trees to keep itself sorted.

The open nodes in the **a-star::search_2** algorithm are selected from a **std::priority_queue**. 
**std::priority_queue** was configured to use a **std::vector** as its base container for implementing the heap.

The open nodes in the **a-star::search_3** algorithm are selcted from a sorted **std::list**. **std::list** implements 
a doubly linked list and insertion sort was used to keep the list sorted at all times.

The run time complexity of `search_1` and `search_2` is *O(nlogn)*. The run time complexity of `search_3` is *O(n^2)*.  
Practically `search_1` runs the fastest, followed by `search_2` and `search_3`.

An example A* search can be executed by compiling and running the [a_star.cpp](./a_star.cpp) file. See the
[Run Instructions](#run-instructions) below for more details on building and running the project.

The code was written to allow a desired level of configurability. Run the code with -h/--help tag to know more.  
```
./a_star -h

Allowed options:
  -h [ --help ]                               Print the help message
                                              
  -s [ --start_id ] arg (=1)                  Start node id as listed in the Nodes file
  -g [ --goal_id ] arg (=1)                   Goal node id as listed in the Nodes file
  -w [ --weight ] arg (=1)                    Weight assigned to heuristic
  -v [ --verbose ] [=arg(=1)] (=0)            Verbosity. Choose between 0, 1, 2 and 3
  -n [ --node_fp ] arg (=nodes.txt)           Relative/absolute path to the Nodes file
  -e [ --edge_fp ] arg (=edges.txt)           Relative/absolute path to the Edges file
  -p [ --path_fp ] arg (=path_output.txt)     Relative/absolute path to the Path output file
  -t [ --search_fp ] arg (=search_output.txt) Relative/absolute path to the Search output file
```

Also, the program can be compiled to use a heuristic from a list of heuristics defined in file [search.h](./search.h).  
Some examples of heuristics are: eu_dist_heuristic, man_dist_heuristic, zero_heuristic.  

### Run Instructions
**For Ubuntu:**  
**Option 1:** (Execute the build_script.sh and run_script.sh)
```shell script
# open this directory
cd <path to this directory>

# build the project
./build_script.sh

# run the a_star algorithm for some sample inputs
./run_script.sh
```

**Option 2:** (Build and run the project yourself)
```shell script
# open this directory
cd <path to this directory>

# view the CMakeLists.txt file of the sub-project
cat ./CMakeLists.txt

# make sure proper directories are included in the CMakeLists.txt file.
<use code editor of your preference to edit CMakeLists.txt>

# create a build directory
mkdir build

# open the build directory
cd build

# cmake the project in the build directory
cmake .. 

# make the cmake project
make -j4

# execute the generated executible file
./<executible file>
```

**For Windows:** I would recommend using an IDE that uses CMake for build process. Use the contents of the provided 
CMakeLists_Windows.txt file in the CMakeLists.txt file of your project generated by the IDE.  
Example IDE: CLion by Jetbrains, Visual Studio etc.

### Sample Run
```shell script
./cmake-build-release/a_star -s 38 -g 502 -n ./inputs/nodes_4.txt -e ./inputs/edges_with_costs_4.txt -p ./outputs/path_output_4.txt -t ./outputs/search_output_4.txt -v
start_id: 38, goal_id: 502, weight: 1, verbose: 1
node_fp: ./inputs/nodes_4.txt
edge_fp: ./inputs/edges_with_costs_4.txt
path_fp: ./outputs/path_output_4.txt
search_fp: ./outputs/search_output_4.txt

Successfully opened the nodes file: ./inputs/nodes_4.txt
The nodes files has 1000 nodes.
1000 nodes were added to the graph.

Successfully opened the edges file: ./inputs/edges_with_costs_4.txt
The edges file has 20000 edges.
11578 unique edges were added to the graph.

The search was successful. It took 94 microseconds.
Start Node: node_id: 38, x: 70.3233, y: 34.3574, p_node_id: 0, status: closed, g_cost: 0, h_cost: 83.2635, f_cost: 83.2635
Goal Node: node_id: 502, x: 7.03754, y: 88.4659, p_node_id: 473, status: closed, g_cost: 87.509, h_cost: 0, f_cost: 87.509

Successfully opened the path file: ./outputs/path_output_4.txt
Successfully wrote path file: "./outputs/path_output_4.txt".

Successfully opened the graph file: ./outputs/search_output_4.txt
Successfully wrote graph file: "./outputs/search_output_4.txt".
```

This search was then visualized using [search_viz.py](./support_files/search_viz.py)
![sol_4.png](./outputs/sol_4.png)

See the [SAMPLE_RUNS.md](./SAMPLE_RUNS.md) file to see graph output of A* search on input files available in 
[inputs](./inputs). The output files of the search are saved in [outputs](./outputs).

